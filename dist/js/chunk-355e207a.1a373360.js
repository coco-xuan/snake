(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-355e207a"],{"1b2f":function(t,e,n){},"44af":function(t,e,n){},"4ceb":function(t,e,n){"use strict";var a=n("1b2f"),r=n.n(a);r.a},"4d72":function(t,e,n){},"50f3":function(t,e,n){"use strict";var a=n("4d72"),r=n.n(a);r.a},"5ad3":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab_control"},t._l(t.titles,(function(e,a){return n("div",{staticClass:"tab_control_item",class:{active:t.currentIndex===a},on:{click:function(e){return t.itemClick(a)}}},[n("span",[t._v(t._s(e))])])})),0)},r=[],i={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("itemClick",t)}}},c=i,o=(n("a1f1"),n("2877")),s=Object(o["a"])(c,a,r,!1,null,"7b0391c4",null);e["a"]=s.exports},7280:function(t,e,n){},"72e4":function(t,e,n){"use strict";var a=n("ff26"),r=n.n(a);r.a},"903d":function(t,e,n){"use strict";var a=n("7280"),r=n.n(a);r.a},a1f1:function(t,e,n){"use strict";var a=n("44af"),r=n.n(a);r.a},bb51:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"category"},[n("category-nav-bar"),n("category-slide",{attrs:{"category-name":t.categoryName},on:{slideItemClick:t.slideItemClick}}),n("scroll",{ref:"scroll",staticClass:"scroll_height"},[n("category-content",{ref:"content",attrs:{"sub-category":t.subCategory[t.currentIndex]},on:{imgLoad:t.imgLoad}}),n("tab-control",{attrs:{titles:t.titles},on:{itemClick:t.itemClick}}),n("goods-list",{attrs:{goods:t.categoryDetailList}})],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav-bar",{staticClass:"nav_bar",scopedSlots:t._u([{key:"center",fn:function(){return[n("p",[t._v("商品分类")])]},proxy:!0}])})},c=[],o=n("a7ac"),s={name:"CategoryNavBar",components:{NavBar:o["a"]}},l=s,u=(n("72e4"),n("2877")),f=Object(u["a"])(l,i,c,!1,null,"b139c7fa",null),g=f.exports,d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("scroll",{directives:[{name:"show",rawName:"v-show",value:t.newCategoryName,expression:"newCategoryName"}],ref:"scroll",staticClass:"slide"},[t._l(t.newCategoryName,(function(e,a){return n("div",{staticClass:"slide_item",class:{active:t.currentIndex===a},on:{click:function(n){return t.itemClick(a,e.maitKey)}}},[t._v(" "+t._s(e.title)+" ")])}))],2)},m=[],y=n("5d17"),h={name:"CategorySlide",props:{categoryName:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0,newCategoryName:[]}},methods:{itemClick:function(t,e){this.currentIndex=t;var n={maitKey:e,index:t};this.$emit("slideItemClick",n)}},components:{Scroll:y["a"]},watch:{categoryName:function(t,e){var n=this;this.newCategoryName=t,this.newCategoryName&&this.$nextTick((function(){n.$refs.scroll.refresh()}))}}},C=h,b=(n("4ceb"),Object(u["a"])(C,d,m,!1,null,"1b3444cb",null)),v=b.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.subCategory?n("div",{staticClass:"content"},t._l(t.subCategory,(function(e,a){return n("div",{key:a,staticClass:"content_item"},[n("img",{attrs:{src:e.image,alt:""},on:{load:function(e){return t.imgLoad(a)}}}),n("p",[t._v(t._s(e.title))])])})),0):t._e()},_=[],x={name:"CategoryContent",props:{subCategory:{type:Array,default:function(){return[]}},currentIndex:0},data:function(){return{newSubCategory:[]}},methods:{imgLoad:function(t){var e=this.subCategory.length;t===e-1&&this.$emit("imgLoad")}}},k=x,I=(n("903d"),Object(u["a"])(k,p,_,!1,null,"46636cc4",null)),N=I.exports,w=n("1bab");function $(){return Object(w["a"])({url:"/category"}).catch((function(t){return t}))}function L(t){return Object(w["a"])({url:"/subcategory",params:{maitKey:t}}).catch((function(t){return t}))}function D(t,e){return Object(w["a"])({url:"/subcategory/detail",params:{miniWallkey:t,type:e}}).catch((function(t){return t}))}var S=n("eecb"),j=n("5ad3"),O=n("6d71"),A={name:"Category",components:{CategoryNavBar:g,CategorySlide:v,CategoryContent:N,Scroll:y["a"],TabControl:j["a"],GoodsList:O["a"]},mixins:[S["b"]],data:function(){return{categoryName:[],subCategory:[],currentIndex:0,titles:["流行","新款","精选"],categoryDetailList:[],currentY:0}},created:function(){this.getCategoryAllData()},methods:{getCategoryAllData:function(){var t=this;$().then((function(e){t.categoryName=e.data.category.list,console.log(t.categoryName),t.getSubcategory(t.categoryName[t.currentIndex].maitKey,t.currentIndex),t.getCategoryDetail(t.categoryName[t.currentIndex].miniWallkey,"pop")}))},slideItemClick:function(t){var e=t.maitKey,n=t.index;this.currentIndex=n,this.getSubcategory(e,this.currentIndex),this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,"pop")},getSubcategory:function(t,e){var n=this;L(t).then((function(t){n.subCategory[e]=t.data.list,n.$forceUpdate()}))},getCategoryDetail:function(t,e){var n=this;D(t,e).then((function(t){n.categoryDetailList=t}))},imgLoad:function(){this.$refs.scroll.refresh()},itemClick:function(t){var e=["pop","new","sell"];this.getCategoryDetail(this.categoryName[this.currentIndex].miniWallkey,e[t])}},deactivated:function(){this.currentY=this.$refs.scroll.getPositionY(),this.$bus.$off("imgLoad",this.imgListener)},activated:function(){this.$refs.scroll.scrollTo(0,this.currentY,50),this.$refs.scroll.refresh()}},E=A,K=(n("50f3"),Object(u["a"])(E,a,r,!1,null,"e206fd1e",null));e["default"]=K.exports},ff26:function(t,e,n){}}]);
//# sourceMappingURL=chunk-355e207a.1a373360.js.map